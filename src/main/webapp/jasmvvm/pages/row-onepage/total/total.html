<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>高后果区油气长输管线安全监控平台</title>

	<link rel="stylesheet" href="../../../lib/element-ui/v2.4.1/theme-chalk/index.min.css">
	<link rel="stylesheet" href="../../../lib/font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="../../../src/css/main.css">
	<link rel="stylesheet" href="../../../src/css/onepage.css">
	<style>
		/*
		 * 左右模块布局比例
		 */
		.panelitem {
			height: 50%;
			padding: 0 10px 10px;
			box-sizing: border-box;
		}
		.panelitem2{
			height: 33%;
			padding: 0 10px 10px;
			box-sizing: border-box;
		}
		.pipeline{
			display:flex;
			flex-direction:column;
			width:86%;
			margin:0 auto;
			
		}
		.pipelineList{
			position: relative;
			height:25%;
			border-right-style:solid;
			border-bottom-style:solid;
			border-left-style:solid;
			border-width:1px;
			border-color:#5695cb;
			border-radius:10px;
			box-shadow: #4f73ba -1px 1px 11px 2px inset;
			margin-top:6px;
		}
		#first_pipeline{
			border-top:solid 1px #5695cb;
		}
		.pipelineList li {
		    font-size:12px;
		    color:#fff;
		    letter-spacing : 1pt;
		    line-height:24px;
		    padding: 0px 10px;
		}
		.icon{
			float:right;
			color:#0ff1e9;
		}
		.icon i{
			margin-right: 6px;	
		}
		#factor{
			display:flex;
			flex-direction:column;
			justify-content:space-around;
		}
       
		ul{
		list-style-type:none;
		 position: absolute;
		 width:100%;
		 top: 50%;
		 transform:translate(0,-50%);
		}
		
			/*
			 * 地图模块下面描述信息样式
			 */
			.center{
				width: 100%;
				height: 100%;
				position: relative;
			}
			.map-info{
				width: 94%;
				background-color: #060e224d;
				margin: 10px;
				
			}
			.map-info p{
			 text-indent: 30px;
			}
			.map-info span{
				color: #ffc000;
				font-size: 14px;
			}
			.rank-table-my{
			    width:100%;
			    /*height: 100%;*/
			    text-align: center;
			    border-spacing: 5px;
			    border-collapse: separate;
			    z-index: 10;
			}
			.rank-table-my th{
			    text-align: center;
			    font-size: 12px;
			    color: #f1f2ea;
			}
			.rank-table-my tr th,
			.rank-table-my tr td{
			    height:30px;
			    line-height:30px;
			    font-size: 12px;
			    color:#f1f2ea;
			}
			.rank-table-my tr span{
			    display: block;
			}
			.rank-table-my tbody tr:nth-child(odd) td{
			    background: #111e2f;
			}
			.rank-table-my tbody tr:nth-child(even) td{
			    background: #0a1727;
			}
			.rank-table-my tbody tr td:first-child{
			    color:rgba(255,255,255,0.7);
			}
			
			.fieldset-body-top{
    width:100%;
    height:50%;
    display: flex;
    justify-content: space-between;
    align-items:stretch
}
.fieldset-item-top{
    flex-basis:100%;
    display: flex;
}

.fieldset-item-top .item-img{
    flex-basis:40%;
    position:relative
}
.fieldset-item-top .item-img img{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate;
    transform: translate(-50%,-50%);
}
.fieldset-item-top .item-info{
    flex-basis:60%;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
.fieldset-item-top .item-info .item-title{
    /* font-size: 13px; */
    font-size: 16px;
    color: #eeeeee;
    line-height: 30px;
}
.fieldset-item-top .item-info .item-val span{
    /* font-size: 15px; */
    font-size: 16px;
    color: #0ff1e9;
}
.fieldset-item-top .item-info .item-val{
    font-size:32px;
/*     font-size:24px; */
    color:#0ff1e9
}

.fieldset-body-top-one{
    width: 100%;
    height: 50%;
    display: flex;
    justify-content: center;
    align-items: stretch;
}
.fieldset-item-top-one{
    flex-basis:50%;
    display: inline-block;
}
.fieldset-item-top-one .item-img{
    flex-basis:50%;
    position:relative
}
.fieldset-item-top-one .item-img img{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate;
    transform: translate(-50%,-50%);
}
.fieldset-item-top-one .item-info{
    flex-basis:60%;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
.fieldset-item-top-one .item-info .item-title{
    /* font-size: 13px; */
    font-size: 16px;
    color: #eeeeee;
    line-height: 30px;
}
.fieldset-item-top-one .item-info .item-val span{
    /* font-size: 15px; */
    font-size: 16px;
    color: #0ff1e9;
}
.fieldset-item-top-one .item-info .item-val{
    font-size:32px;
/*     font-size:24px; */
    color:#0ff1e9
}
 i:hover{
			cursor: pointer;
		}		
			.fieldset-body{
	width:100%;
	height:100%;
	display: flex;
	justify-content: space-between;
	align-items:stretch
}
.fieldset-item{
	flex-basis:50%;
	display: flex;
}
.fieldset-item .item-img{
	flex-basis:40%;
	position:relative
}
.fieldset-item .item-img img{
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate;
	transform: translate(-50%,-50%);
}
.fieldset-item .item-info{
	flex-basis:60%;
	display: flex;
	flex-direction: column;
	justify-content: center;
}
.fieldset-item .item-info .item-title{
	font-size: 16px;
	color: #eeeeee;
	line-height: 30px;
}
.fieldset-item .item-info .item-val{
	font-size:32px;
	color:#0ff1e9
}		
	</style>
</head>

<body style="overflow:auto;">
	<div id="app">
		<jas-onepage-wrapper :ismax="ismax">
			<template slot="left">
				<div class="panelitem">
					<jas-panel-opacity title="管线管理">
						<div id="pipelineButton" @click="pipelineMapPage" :style="[pipelineStyle]" @mouseover="isActive1=true" @mouseout="isActive1=false" style="float:right;color:#3a9ebf;"><i class="fa fa-cogs fa-2x" aria-hidden="true"></i></div>
						<div class="pipeline" style="height:100%;">
						<div style="height:25%" >
								<div class="fieldset-body">
							<div class="fieldset-item">
								<div class="item-img">
									<img src="./image/not-check.png" alt="">
								</div>
								<div class="item-info">
									<p class="item-val">2<span style="font-size:16px;">  条</span></p>	
									<p class="item-title">本年度已识别</p>
								</div>	
							</div>	
							<div class="fieldset-item">
								<div class="item-img">
									<img src="./image/not-repaire.png" alt="">
								</div>
								<div class="item-info">
									<p class="item-val">1<span style="font-size:16px;">  条</span></p>	
									<p class="item-title">本年度未识别</p>
								</div>	
							</div>	
						</div>	
							</div>
							<div class="pipelineList" id="first_pipeline">
								<ul >
									<li><span>管线名称：</span>陕京四线
									<div class="icon" style="color: #f02123;">未识别&emsp;<i :style="[buttonStyle(1)]" @mouseover="isClick=1" @mouseout="isClick=0"  @click="intoMap" class="fa fa-podcast fa-lg" aria-hidden="true"></i></div>
									</li>
									<li><span>管线长度：</span>123KM</li>
									<li><span>最近评价时间：</span>2019年4月12日</li>
								</ul>
							</div>
							<div class="pipelineList" >
								<ul >
									<li><span>管线名称：</span>京津线
									<div class="icon">已识别&emsp;<i :style="[buttonStyle(2)]" @mouseover="isClick=2" @mouseout="isClick=0"  @click="intoMap" class="fa fa-podcast fa-lg" aria-hidden="true"></i></div>
									</li>
									<li><span>管线长度：</span>83.4KM</li>
									<li><span>最近评价时间：</span>2018年6月13日
									<div class="icon" style="color: #ffb719;">距下次识别还有27天</div>
									</li>
									
								</ul>
							</div>
							<div class="pipelineList" >
								<ul >
									<li><span>管线名称：</span>秦京线
									<div class="icon">已识别&emsp;<i :style="[buttonStyle(3)]" @mouseover="isClick=3" @mouseout="isClick=0"  @click="intoMap" class="fa fa-podcast fa-lg" aria-hidden="true"></i></div>
									</li>
									<li><span>管线长度：</span>324.6KM</li>
									<li><span>最近评价时间：</span>2019年4月22日</li>
								</ul>
							</div>
						</div>
					</jas-panel-opacity>
				</div>
				<div class="panelitem">
					<jas-panel-opacity title="要素管理">
						<div id="factorButton" @click="gotoMapPage" :style="[activeStyle]" @mouseover="isActive=true" @mouseout="isActive=false" style="float:right;color:#3a9ebf;"><i class="fa fa-cogs fa-2x" aria-hidden="true"></i></div>
						<div id="factor" style="height: 100%;">
                    		       <div style="height: 30%;">
	                        <div class="fieldset-body-top">
		                        <div class="fieldset-item-top">
		                            <div class="fieldset-item-top">
	                                    <div class="item-img">
	                                        <img src="./image/1.png" alt="">
	                                    </div>
	                                    <div class="item-info">
	                                        <p class="item-val">240<span> 处<span></p>  
	                                        <p class="item-title">独立民居</p>
	                                    </div>  
	                                </div>  
	                                <div class="fieldset-item-top">
	                                    <div class="item-img">
	                                        <img src="./image/2.png" alt="">
	                                    </div>
	                                    <div class="item-info">
	                                        <p class="item-val">17<span> 处<span></p>  
	                                        <p class="item-title">特定场所</p>
	                                    </div>  
	                                </div>  
		                        </div>  
		                    </div>
	                    </div>
	                           <div style="height: 30%;">
	                        <div class="fieldset-body-top">
		                        <div class="fieldset-item-top">
		                            <div class="fieldset-item-top">
	                                    <div class="item-img">
	                                        <img src="./image/2.png" alt="">
	                                    </div>
	                                    <div class="item-info">
	                                        <p class="item-val">12<span> 处<span></p>  
	                                        <p class="item-title">易燃易爆场所</p>
	                                    </div>  
	                                </div>  
	                                <div class="fieldset-item-top">
	                                    <div class="item-img">
	                                        <img src="./image/3.png" alt="">
	                                    </div>
	                                    <div class="item-info">
	                                        <p class="item-val">7<span> 处<span></p>  
	                                        <p class="item-title">商业区</p>
	                                    </div>  
	                                </div>  
		                        </div>  
		                    </div>
	                    </div>
	                           <div style="height: 30%;">
	                        <div class="fieldset-body-top">
		                        <div class="fieldset-item-top">
		                            <div class="fieldset-item-top">
	                                    <div class="item-img">
	                                        <img src="./image/3.png" alt="">
	                                    </div>
	                                    <div class="item-info">
	                                        <p class="item-val">24<span> 处<span></p>  
	                                        <p class="item-title">工业区</p>
	                                    </div>  
	                                </div>  
	                                <div class="fieldset-item-top">
	                                    <div class="item-img">
	                                        <img src="./image/1.png" alt="">
	                                    </div>
	                                    <div class="item-info">
	                                        <p class="item-val">7<span> 处<span></p>  
	                                        <p class="item-title">规划区</p>
	                                    </div>  
	                                </div>  
		                        </div>  
		                    </div>
	                    </div>
           				 </div>
					</jas-panel-opacity>
				</div>
			</template>
			<template slot="center" >
				 <div class="center">
					 <!--图层控制开关-->
					 <div class="switch-div">
						<el-switch
							style="display: block"
							v-model="value3"
							inactive-color="#33568a"
							inactive-text="红色预警"
							active-color="#ff2d2d"
							@change="operateMap"
							>
							</el-switch>
							<el-switch
							style="display: block"
							v-model="value4"
							inactive-color="#33568a"
							inactive-text ="橙色预警"
							active-color="#ff7400"
							@change="operateMap"
							>
							</el-switch>
							<el-switch
							style="display: block"
							v-model="value5"
							inactive-color="#33568a"
							inactive-text="黄色预警"
							active-color="#ffb719"
							@change="operateMap"
							> 
						</el-switch>					
					 </div>
			

					 <!--图层操作按钮-->
					 <div class="operate-div">
						 <span class="max" @click="openMax"></span>
						 <span class="yingxiang" @click="switchImageMap"></span>
						 <span class="shiliang" @click="switchVecMap"></span>
						 <span class="threeD" @click="open3D"></span>
						 <span class="tuceng" @click="openTuCeng"></span>
					 </div>

					  <div id="jasMap" class="jasmap" style="height:100%;width:100%;background: transparent"></div>
				 </div>
			</template>
			<template slot="right">
				<div class="panelitem2">
					<jas-panel-opacity title="高后果区等级比例">
						<div style="height:100%;">
							<div id="thematic_statistics_pie" style="height:100%"></div>
						</div>
					</jas-panel-opacity>
				</div>
				<div class="panelitem2">
					<jas-panel-opacity title="高后果区信息">
						<div class="map-info" v-show="!ismax">
							<table class="rank-table-my">
								<thead>
									<tr> 
										<th>序号</th> <th>项目名称</th> <th>I级高后果区</th><th>II级高后果区</th><th>III级高后果区</th><th>最近识别时间</th><th>操作</th>
									</tr>
								</thead>
								<tbody>
									<tr v-for="(item,index)  in detailData"> 
										<td><span>{{index+1}}</span></td><td>{{item.projectName}}</td> <td>{{item.one}}</td><td>{{item.two}}</td><td>{{item.three}}</td><td>{{item.datetime}}</td><td><i class="fa fa-eye" @click='previewFile' style="color:#efc276" aria-hidden="true"></i></td>
									</tr>
								</tbody>
							</table>
					</div>
					</jas-panel-opacity>
				</div>
				<div class="panelitem2">
					<jas-panel-opacity title="高后果区数量变化图">
						<div id="safeTrend" style="height:100%;"> </div>
					</jas-panel-opacity>
				</div>
			</template>
		</jas-onepage-wrapper>
	</div>
</body>
<!-- import Vue before Element -->
<script src="../../../lib/vue/vue.js"></script>
<script src="../../../lib/jquery/jquery-1.12.4.min.js"></script>
<script src="../../../lib/element-ui/v2.4.1/index.min.js"></script>

<!-- import JavaScript -->
<script src="../../../lib/echarts/echarts.min.js"></script>

<script src="../../../common/components/jas-components.js"></script>
<script src="../../../common/js/jas-tools.js"></script>
<script src="../components/onepage-components.js"></script>

<script id="mapApi" src="../../map/mapjs/jasopengis.js"></script>
<script>

</script>

<script>
	var app = new Vue({
		el: '#app',
		data: function () {
			return {
				ismax:false,
				// index:0,
                jasMap:null,
				mapConfig:"config.onepage.json",
                layerId:"demo_pd_fengxian",//空间表layerId (表名)
                layerKeyName:"gid",//空间表layerId (表名)

				value3: true,   // 地图切换按钮样式
	            value4: true,
	            value5: true,
	            detailData:[],
	            isActive:false,
	            isActive1:false,
	            isClick:'0',
	            

			}
		},
		watch: {
			// 如果需要联动
			areaVal: function (newval, oldval) {
			},
			// 地图最大化的监控
			ismax:function (newval, oldval) {
				var that = this;
					this.$nextTick(function(){
						that.jasMap.resizeMap()
					})
			},
		},
		computed: {
			activeStyle:function(){
				if(this.isActive){
				return {color:'#0ff1e9'};
				}
				return {color:'#3a9ebf'};
			},
			pipelineStyle:function(){
				if(this.isActive1){
				return {color:'#0ff1e9'};
				}
				return {color:'#3a9ebf'};
			},
			
		},
		created: function () {
			var that = this;
			$(function(){
				// 获取chart图表数据
				that.getChartData();
				that.getThematicStatisticsPie();
				that.detailData=[
									{"projectName":"西南管线","one":"12处","two":"23处","three":"15处","datetime":"2019年3月"},
									{"projectName":"京津管线","one":"10处","two":"20处","three":"25处","datetime":"2019年3月"},
									{"projectName":"内蒙管线","one":"17处","two":"13处","three":"10处","datetime":"2019年3月"},
									{"projectName":"福建管线","one":"10处","two":"22处","three":"5处","datetime":"2019年3月"}
								];
				
			})

			 var data = {
						"status":1,
						"riskGrade":[
							{"Num":"1","grade":"I级"},
							{"Num":"1","grade":"II级"},
							{"Num":"3","grade":"III级"},
						],
						"riskResult":[
							{"Num":"3,261","grade":"高后果区总计"},
							{"Num":"117","grade":"I级高后果区"},
							{"Num":"1,952","grade":"II级高后果区"},
							{"Num":"1,192","grade":"III级高后果区"},
						],
					};

			that.riskListData = data.riskList;

            that.jasMap = new JasMap({
                appConfig:that.mapConfig
            });
           
		},
		methods: {
			getChartData:function () {
				var that = this;
				// var url = './data.json';
				// jasTools.ajax.post(url, {
				// }, function (data) {
				// 	if(data.status == 1){
					    var data = {
							"status":1,
						
							"SafeTrend":{
								"month": ["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],
								"year1":["2.90","4.00","5.00","5.00","3.00","4.00","3.00","2.00","5.00","6.00","4.00","3.00"],
								"year2":["2.90","3.00","2.50","3.60","4.00","2.00","3.80","4.70","5.40","5.00","4.70","5.00"]
							}
						};

						

						that.SafeTrendData = data.SafeTrend;
						that.safeTrendChart();
					// }
				// });
			},
			
			safeTrendChart:function(){
				var that = this;
				if (!this.ChartsafeTrend) {
					this.ChartsafeTrend = echarts.init(document.getElementById('safeTrend'));
					$(window).resize(function () {
						that.ChartsafeTrend.resize();
					});
				}
				var option = {
						textStyle: {
							color: "#5695cb",
							fontSize: 12
						},
						tooltip : {
							trigger: 'axis',
							axisPointer: {
								type: 'shadow',
								label: {
									show: true
								}
							}
						},
						legend: {
							right:"0%",
							textStyle:{
								color:"#03affe"
							},
							data:['2019','2018']
						},
						grid: {
							top: '12%',
							left: '10%',
							right: '10%',
							bottom:"12%"
						},
						xAxis: [
							{
								// name: '月份',
								type : 'category',
								axisLine:{
									lineStyle:{
										color:"#5695cb"
									}
								},
								// data:that.SafeTrendData.month,
								data : ["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",]
							}
					],
					yAxis: [
							{
								name: '',
								type : 'value',
								// axisLabel: {
								// 		formatter: '{value}.00 %'
								// },
								splitLine:{
									lineStyle:{
										color:"#5695cb"
									}
								},
								axisLine:{
									lineStyle:{
										color:"#5695cb"
									}
								},
								min:"0",
								max:"7"
							}
						],
						series : [
							{
								name: '2019',
								type: 'line',
								symbol:'circle',
								symbolSize:4,
								label: {
								    normal: {
								        show: true,
								        position: 'top',
								        // textStyle:{
								        //     color:"#f1f2ea"
								        // },
								        // formatter:function(params){
								        //     return params.value + "%";
								        // }
								    }
								},
								lineStyle:{
								normal: {
										color:"#ff2d2d"
									} 
								},
								itemStyle:{
								normal: {
										color:"#ff2d2d"
									} 
								},
								// data:that.SafeTrendData.year1
								data: ["2","4","5","5","3","4","3","2","5","6","4","3"]
							},{
								name: '2018',
								type: 'line',
								symbol:'circle',
								symbolSize:4,
								label: {
								    normal: {
								        show: true,
								        position: 'top',
								        // textStyle:{
								        //     color:"#f1f2ea"
								        // },
								        // formatter:function(params){
								        //     return params.value + "%";
								        // }
								    }
								},
								lineStyle:{
								normal: {
										color:"#28ffd9"
									} 
								},
								itemStyle:{
								normal: {
										color:"#28ffd9"
									} 
								},
								
								// data:that.SafeTrendData.year2
								data: ["2","3","2","3","4","2","3","4","5","5","4","5"]
							}
						]
					};
			
				this.ChartsafeTrend.setOption(option,true);
			},
			getThematicStatisticsPie:function(){
				var that = this;
				if(!this.thematicStatisticsPie){
					that.thematicStatisticsPie = echarts.init(document.getElementById('thematic_statistics_pie'));
					$(window).resize(function () {
						that.thematicStatisticsPie.resize();
					});
				}
				var option = {
				    tooltip : {
				        trigger: 'item',
				        formatter: "{a} <br/>{b} : {c} ({d}%)"
				    },
				    legend: {
				        orient: 'horizontal',
				        left: 'right',
				        data: ['Ⅰ级','Ⅱ级','Ⅲ级'],
				        textStyle:{
							color:"#f1f2ea"					            	
				        }
				    },
				    textStyle:{
						color:"#f1f2ea"					            	
				    },
				    series : [{
			            name: '等级',
			            type: 'pie',
			            color:['#ff2d2d','#ff7400','#ffb719'],
			            radius : '55%',
			            data:[
			                {value:75, name:'Ⅰ级'},
			                {value:105, name:'Ⅱ级'},
			                {value:154, name:'Ⅲ级'}
			            ],
			            label: {
			                normal: {
			                    show: true,
			                    formatter: "{b}: {d}%",
			                    position: 'top'
			                },
			                emphasis: {
			                    shadowBlur: 10,
			                    shadowOffsetX: 0,
			                    shadowColor: 'rgba(0, 0, 0, 0.5)'
		                    }
		            	}
			        }]
				};
				this.thematicStatisticsPie.setOption(option);
				
			},
			gotoMapPage:function(){
				location.href="../hca-operation/factorOperation.html";
			},
			pipelineMapPage:function(){
				location.href="../hca-operation/pipelineOperation.html";
			},
			intoMap:function(){
				location.href="../hca-operation/operation.html";
			},
			buttonStyle:function(index){
				if(this.isClick==index){
				return {color:'#6df9c2'};
				}
				return {color:'#53bf95'};
			},
			previewFile : function(){
				top.jasTools.selfDialogNew.show({
					title: '分析报告',
					src: './dialogs/preview_file.html',
					height: '740px',
					width: '35%',
				})
			},
			openRiskDetail:function(){
				// $(".map-info").hide();
				// alert(jasTools.base.rootPath);
				jasTools.selfDialog.show({
					title: '风险列表',
					// src: './dialogs/detail2.html',
					src: './dialogs/detailList.html?dataType=fengxianList',
					height: '200px',
					// width: '800px',
					width: '48%',
				})
			},
			open3D:function(e){
				// alert("open3D");
				// var tag = e.target;
				// console.log(tag);
				// $(tag).toggleClass("active");
				// if($(tag).hasClass("active")){
					// alert("执行打开3D图层");
				// }
				window.open("../../../../jasmvvm/pages/map3d/app_nmg/index.html");
			},
			openMax:function(e){
				// alert("地图最大化:"+this.ismax);
				this.ismax = !this.ismax;
			},
			clearMap:function(e){
				// alert("清除所有图层");
			},
            switchImageMap:function(e){
                if(this.baseMap !== "google_img"){
                    this.baseMap = "google_img";
                }else{
                    this.baseMap = "dark_shp";
                }
                this.jasMap.switchBaseMap(this.baseMap);
			},
            switchVecMap:function(e){
                if(this.baseMap !== "google_vec"){
                    this.baseMap = "google_vec";
                }else{
                    this.baseMap = "dark_shp";
                }
                this.jasMap.switchBaseMap(this.baseMap);
            },
			openTuCeng:function(){
				jasTools.selfDialog.show({
					title: '图层列表',
					src: '../common/mapList.html',
					height: '265px',
					width: '200px',
					right:"27%",
					top:"360px",
				})
			},
			areaChange:function(){
				// alert(this.areaVal)
			},
			companyChange:function(){
				// alert(this.companyVal)
			},
			showGaoHouGuo:function(){
				// alert("在地图长显示高后果区信息")
				jasTools.selfDialog.show({
					title: '高后果区违规列表',
					// src: './dialogs/detail3.html',
					src: './dialogs/detailList.html?dataType=gaoHouGuoWeiGui',
					height: '200px',
					// width: '800px',
					width: '48%',
				})
				
			},
			showNeiJianCe:function(){
				// alert("在地图长显示内检测信息")
				jasTools.selfDialog.show({
					title: '内检测违规列表',
					// src: './dialogs/detail4.html',
					src: './dialogs/detailList.html?dataType=neiJianCeWeiGui',
					height: '200px',
					// width: '800px',
					width: '48%',
				})
			},
			showDuBanList:function(){
				jasTools.selfDialog.show({
					title: '督办列表',
					// src: './dialogs/detail5.html',
					src: './dialogs/detailList.html?dataType=duBanList',
					height: '200px',
					// width: '800px',
					width: '48%',
				})
			},
			operateMap:function(){
				// switch 按钮控制图层
				// alert("switch 按钮控制图层");
				var arr = [];
                if(this.value5){
                    arr.push("I级风险");//layerId表level值
                }
                if(this.value4){
                    arr.push("Ⅱ级风险");
                }
                if(this.value3){
                    arr.push("Ⅲ级风险");
                }
                console.log(arr);
                // 这里调用操作地图图层的方法
                // switch 传参 a:所要展示的类型值[1,2,3]
                //             b:类型的名称 "level"
                this.jasMap.updateLayer(this.layerId,{
                    "show":true,
                    "fieldName":"level",
                    "fieldValues":arr
                })
			},
			locationPoint:function(idx,type){
				var key = this.layerKeyName;
				var target = {};
                target[key] = idx + 1;
                this.jasMap.flashGraphic( target ,this.layerId);
			},
			
			openDetail:function(dataType){
				jasTools.selfDialog.show({
					title: '详情列表',
					src: './dialogs/detailPage.html',
					height: '450px',
					width: '30%',
					isDetail:true, 
				})
			}
		}
	})
</script>

</html>