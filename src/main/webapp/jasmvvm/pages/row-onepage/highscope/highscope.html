<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>内蒙古自治区油气长输管线安全监控平台</title>

	<link rel="stylesheet" href="../../../lib/element-ui/v2.4.1/theme-chalk/index.min.css">
	<link rel="stylesheet" href="../../../lib/font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="../../../src/css/main.css">
	<link rel="stylesheet" href="../../../src/css/onepage.css">
	<style>
		.panelitem {
			height: 100%;
			padding: 0 10px 10px;
			box-sizing: border-box;
		}
		.panelitem_right_top {
			height: 25%;
			padding: 0 10px 10px;
			box-sizing: border-box;
		}
		.panelitem_right_center {
			height: 30%;
			padding: 0 10px 10px;
			box-sizing: border-box;
		}
		.panelitem_right_bottom{
			height: 45%;
			padding: 0 10px 10px;
			box-sizing: border-box;
		}

		.height-one{
			height: 85px;
			margin: 10px 0;
			/*background: cyan*/
		}
		.height-two{
			height: calc(100% - 105px);
			/*background: yellow*/
		}
		.chart-dl{
			font-size: 0;
		}
		.chart-dl dl{
			width:25%;
			height: 60px;
			padding: 10px 0;
			display: inline-block;
			vertical-align: middle;
			margin-bottom: 0;
		}
		.chart-dl dl dt,
		.chart-dl dl dd{
			height: 100%;
			display: inline-block;
			vertical-align: middle;
		}
		.chart-dl dl dt img{
			width: 40px;
			height: 40px;
		}
		.chart-dl dl dd{
			padding-left:10px; 
		}
		.chart-dl dl dd p{
			padding: 0;
			margin: 0;
			line-height: 20px;
			color: #03affe
		}
		.chart-dl dl dd p:last-child{
			font-size: 18px;
			color: #ffcc00
		}
		.chart-square{
			padding: 10px 2px;
			box-sizing:border-box;
			border: 1px solid #375a78
		}
		.chart-circle{
			/*height: 100%;*/
			display: flex;
    		justify-content: space-between;
		}
		.chart-square dl,
		.chart-circle dl{
			/*height: 100%;*/
			display: inline-block;
			vertical-align: middle;
			position: relative;
			margin: 0;
		}
		.chart-square  dl dd,
		.chart-square  dl dt{
			width: 98px;
			height: 59px;
		}
		.chart-circle dl dd,
		.chart-circle dl dt img{
			width: 94px;
		}
		.chart-square dl dd,
		.chart-circle dl dd{
			position: absolute;
			left: 0;
			top: 0;
			text-align: center;
		}
		.chart-square dl dd p,
		.chart-circle dl dd p{
				color: #fff
		}
		.chart-square dl dd p:first-child,
		.chart-circle dl dd p:first-child{
			margin: 0;
			margin-top: 20px;
			font-weight: bold;
			font-size: 20px;
		}
		.chart-square dl dd p:first-child{
			margin-top: 5px;
			margin-bottom: 5px;
			font-size: 12px;
		}
		.chart-square dl dd p:last-child{
			font-size: 16px;
			color: #e7ffff;
			font-weight: bold;
			line-height:26px;
		}
		.marquee-box{
			height: 100%;
			padding: 15px;
			border:1px solid #375a78;
			box-sizing: border-box;
			overflow: hidden;
		}
		legend{
			color:#5695cb;
			margin-left: 20px;
		}
		.marquee{
			height: 100%;
			overflow: hidden;
			position: relative;
		}
		.marquee .marquee-content{
			display: block;
			width:100%;
			height: 200%;
			position: absolute;
			overflow: hidden;
			-webkit-animation: marquee 20s linear infinite;
			animation: marquee 20s linear infinite;
		}
		.marquee p{
			color: #72c1ea;
			margin-bottom: 20px;
		}
		.marquee span{
			color: #93eeff;
			border-right: 1px solid #93eeff;
			padding: 0 5px;
		}
		.marquee span:last-child{
			color: #ffc000;
			border-right: 0
		}

		@keyframes marquee {
			from {
				top: 0;
			}
			to {
				top: -100%;
			}
		}

		 .absolute-r{
			position: absolute;
			right: 20px;
			top: 0;
			}
			.select-box{
				height: 100%; 
			}
			.select-box .bootstrap-select:not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn){
				width: 120px;
		}
    
			.select-box .btn{
				padding: 3px 11px;
			}
			.select-box .search{
				display: inline-block;
				vertical-align: middle;
				position: relative;
			}
			.select-box  .search-input{
				height: 28px;
				padding-right:25px; 
				border-radius: 4px;
			}
			.select-box  .search-icon{
				display: inline-block;
				vertical-align: middle;
				position: absolute;
				right: 0px;
				top: 0px;
				width: 25px;
				height: 28px;
				border-radius: 0 4px 4px 0;
				background:#0d85d3 url("../image/search.png")no-repeat center center;
				background-size: 16px 16px;
			}

			.select-box .search-input,
			.btn-default,
			.btn-default:active:hover, .btn-default.active:hover, .open>.dropdown-toggle.btn-default:hover, .btn-default:active:focus, .btn-default.active:focus, .open>.dropdown-toggle.btn-default:focus, .btn-default:active.focus, .btn-default.active.focus, .open>.dropdown-toggle.btn-default.focus{
				background: transparent;
				border: 1px solid #4c535b;
			}
			.select-box .search-input:focus,
			.btn-default:active:hover, .btn-default.active:hover, .open>.dropdown-toggle.btn-default:hover, .btn-default:active:focus, .btn-default.active:focus, .open>.dropdown-toggle.btn-default:focus, .btn-default:active.focus, .btn-default.active.focus, .open>.dropdown-toggle.btn-default.focus{
				border: 1px solid #0d85d3;
				outline: 0;
			}
				
		.select-box button:-webkit-autofill{
				-webkit-text-fill-color: #5695cb !important;
				-webkit-box-shadow: 0 0 0px 1000px transparent  inset !important;
				background-color:transparent;
				background-image: none;
				transition: background-color 50000s ease-in-out 0s; 
			}
			.center{
				width: 100%;
				height: 100%;
				position: relative;
			}
			.map-info{
				position: absolute;
				bottom: 0;
				height: 20%;
				width: 98%;
				padding: 8px;
				box-sizing: border-box;
				color: #ffffff;
				background-color: #060e224d;
				line-height: 30px;
				margin: 10px;
			}
			.map-info p{
				    text-indent: 30px;
			}
			.map-info span{
				color: #ffc000;
				font-size: 14px;
			}
			.rank-table-my{
			    width:100%;
			    /*height: 100%;*/
			    text-align: center;
			    border-spacing: 5px;
			    border-collapse: separate;
			    z-index: 10;
			}
			.rank-table-my th{
			    text-align: center;
			    font-size: 12px;
			    color: #f1f2ea;
			}
			.rank-table-my tr th,
			.rank-table-my tr td{
			    height:30px;
			    line-height:30px;
			    font-size: 12px;
			    color:#f1f2ea;
			}
			.rank-table-my tr span{
			    display: block;
			}
			.rank-table-my tbody tr:nth-child(odd) td{
			    background: #111e2f;
			}
			.rank-table-my tbody tr:nth-child(even) td{
			    background: #0a1727;
			}
			.rank-table-my tbody tr td:first-child{
			    color:rgba(255,255,255,0.7);
			}
			.fieldset-body{
				width:100%;
				height:100%;
				display: flex;
    			justify-content: space-between;
    			align-items:stretch
			}
			.fieldset-item{
				flex-basis:50%;
				display: flex;
			}
			.fieldset-item .item-img{
				flex-basis:40%;
				position:relative
			}
			.fieldset-item .item-img img{
				position: absolute;
			    top: 50%;
			    left: 50%;
			    transform: translate;
			    transform: translate(-50%,-50%);
			}
			.fieldset-item .item-info{
				flex-basis:60%;
				display: flex;
			    flex-direction: column;
			    justify-content: center;
			}
			.fieldset-item .item-info .item-title{
				font-size: 14px;
			    color: #eeeeee;
			    line-height: 30px;
			}
			.fieldset-item .item-info .item-val{
				font-size:32px;
				color:#0ff1e9
			}
			
	</style>
</head>

<body style="overflow:auto;">
	<div id="app">
		<jas-onepage-wrapper :ismax="ismax" :index="index">
			<template slot="left">
				<div class="panelitem">
					<jas-panel-opacity title="专题统计">
						<div style="height:100%;">
							<div id="thematic_statistics_pie" style="height:33.3%;"></div>
							<div id="thematic_statistics_bar" style="height:33.3%;"></div>
							<div id="thematic_statistics_line" style="height:33.3%;padding-top:20px;"></div>
						</div>
					</jas-panel-opacity>
				</div>
			</template>
			<template slot="center" >
				<div class="center">
					<div class="switch-div">
						<el-switch
							@change="operateMap"
							style="display: block"
							v-model="button_1_value"
                          	inactive-color="#33568a"
                          	inactive-text="高后果区Ⅰ级"
                          	active-color="#ff2d2d">
                        </el-switch>
                        <el-switch
                        	@change="operateMap"
                          	style="display: block"
                          	v-model="button_2_value"
                        	inactive-color="#33568a"
	                        inactive-text ="高后果区Ⅱ级"
	                        active-color="#ff7400">
                        </el-switch>
                        <el-switch
                        	@change="operateMap"
                          	style="display: block"
                          	v-model="button_3_value"
                          	inactive-color="#33568a"
                          	inactive-text="高后果区Ⅲ级"
                          	active-color="#ffb719"> 
                      	</el-switch>
                      	<div style="height: 3px;"></div>
                        <el-switch
                        	@change="operateMapVido"
                          	style="display: block"
                          	v-model="button_4_value"
                          	inactive-color="#33568a"
                          	inactive-text="摄像头"
                          	active-color="#409EFF"> 
                      	</el-switch>
			     	</div>
			     	<!--图层筛选条件-->
					 <div class="select-div">
							<el-select v-model="areaVal" @change="areaChange" placeholder="请选择" style="width:180px;margin-right: 10px;">
								<el-option
								v-for="item in areaOption"
								:key="item.value"
								:label="item.label"
								:value="item.value">
								</el-option>
							</el-select>
							<el-select v-model="companyVal" @change="companyChange"  placeholder="请选择" style="width:180px;">
								<el-option
								v-for="item in companyOption"
								:key="item.value"
								:label="item.label"
								:value="item.value">
								</el-option>
							</el-select>
					 </div>
					 
					 <!--图层操作按钮-->
					 <div class="operate-div">
						 <span class="max" @click="openMax"></span>
						 <span class="yingxiang" @click="switchImageMap"></span>
						 <span class="shiliang" @click="switchVecMap"></span>
						 <span class="threeD" @click="open3D"></span>
						 <span class="tuceng" @click="openTuCeng"></span>
					 </div>
					<div id="jasMap" class="jasmap" style="height:100%;width:100%;background: transparent"></div>
					<div class="map-info" v-show="!ismax">
							<table class="rank-table-my">
								<thead>
									<tr> 
										<th>序号</th> <th>编号</th> <th>高后果区等级</th><th>识别单位</th><th>识别时间</th><th>管道名称</th><th>管径(mm)</th>
										<th>起始桩号</th><th>起始里程(km)</th><th>结束桩号</th><th>结束里程(km)</th>
									</tr>
								</thead>
								<tbody>
									<tr v-for="(item,index)  in detailData"> 
										<td><span>{{index+1}}</span></td><td>{{item.num}}</td> <td>{{item.grade}}</td><td>{{item.unit}}</td><td>{{item.datetime}}</td><td>{{item.pipe_name}}</td><td>{{item.pipe_diameter}}</td>
										<td>{{item.start_median_num}}</td><td>{{item.start_median_mileage}}</td><td>{{item.end_median_num}}</td><td>{{item.end_median_mileage}}</td>
									</tr>
								</tbody>
							</table>
					</div>
				</div>
			</template>
			<template slot="right">
				<div class="panelitem_right_top">
					<jas-panel-opacity title="合规性提醒">
						<div style="height:70%;cursor: pointer;" @click="getComplianceList_1()">
							<div class="fieldset-body">
								<div class="fieldset-item">
									<div class="item-img">
										<img src="image/not-repaire.png" alt="">
									</div>
									<div class="item-info">
										<p class="item-val">3<span style="font-size:14px;">家</span></p>	
										<p class="item-title">十八个月未上报</p>
									</div>	
								</div>	
								<div class="fieldset-item">
									<div class="item-img">
										<img src="image/not-check.png" alt="">
									</div>
									<div class="item-info">
										<p class="item-val">5<span style="font-size:14px;">家</span></p>	
										<p class="item-title">缺少一区一案</p>
									</div>	
								</div>	
							</div>	
						</div>
						<div style="height:30%;line-height:18px;cursor:pointer;" @click="previewFile()">
							<span style="color: #f1f2ea;font-size: 13px;">
								<p class="fa fa-book">&nbsp;&nbsp;GB32167《油气输送管道完整性管理规范》</p>
								<p class="fa fa-book">《国家安全监管总局等八部门关于加强油气输送管道途径人员密集</p>
								<p>场所高后果区安全工作的通知》安监总局管三[2017]138号</p>
							</span>
						</div>
					</jas-panel-opacity>
				</div>
				<div class="panelitem_right_center">
					<jas-panel-opacity title="督办整改">
						<div style="height:100%;">
							<div id="supervise_pie" style="height:100%;"></div>
						</div>
					</jas-panel-opacity>
				</div>
				<div class="panelitem_right_bottom">
					<jas-panel-opacity title="视频监控">
						<div id="performance" style="height:98%;text-align: center;border: 1px solid #375a78;">
							<div style="height:50%;">
								<div style="height:100%;width:50%;float:left;">
									<img src="image/video_img_1.jpg" width="100%" height="100%"></img>
								</div>
								<div style="height:100%;width:50%;float:right;">
									<img src="image/video_img_2.jpg" width="100%" height="100%"></img>
								</div>
							</div>
							<div style="height:50%;">
								<div style="height:100%;width:50%;float:left;">
									<img src="image/video_img_3.jpg" width="100%" height="100%">
								</div>
								<div style="height:100%;width:50%;float:left;">
									<img src="image/video_img_4.jpg" width="100%" height="100%"></img>
								</div>
							</div>
						</div>
					</jas-panel-opacity>
				</div>
			</template>
		</jas-onepage-wrapper>
	</div>

</body>
<!-- import Vue before Element -->
<script src="../../../lib/vue/vue.js"></script>
<script src="../../../lib/jquery/jquery-1.12.4.min.js"></script>
<script src="../../../lib/element-ui/v2.4.1/index.min.js"></script>

<!-- import JavaScript -->
<script src="../../../lib/echarts/echarts.min.js"></script>

<script src="../../../common/components/jas-components.js"></script>
<script src="../../../common/js/jas-tools.js"></script>
<script src="../components/onepage-components.js"></script>

<script id="mapApi" src="../../map/mapjs/jasopengis.js"></script>
<script>
	var onCenterStakeLayerClicked = function (e) {
		//业务逻辑
	};
</script>

<script>
	var app = new Vue({
		el: '#app',
		data: function () {
			return {
				jasMap:null,
				mapConfig:"config.onepage.json",
                layerId:"demo_pd_gaohouguoqu",//空间表layerId (表名)
                layerId_vido:"demo_pd_shexiangtou",//空间表layerId (表名)
                layerKeyName:"gid",//空间表layerId (表名)
				
				ismax: false,
				index:1, // 0,1,2,3,4,5,6,7 七个选择
				thematicStatisticsPie:"",
				thematicStatisticsBar:"",
				thematicStatisticsLine:"",
				supervisePie:"",
				detailData:[],
				button_1_value: true,   // 地图切换按钮样式
				button_2_value: true,
				button_3_value: true,
				button_4_value: true,
				areaVal:"全自治区",
				areaOption:[],
				companyVal:"全部企业",
				companyOption:[]
			}
		},
		computed: {},
		created: function () {
			var that = this;
			$(function(){
				// 获取chart图表数据
				that.getChartData();
				that.getThematicStatisticsPie();
				that.getThematicStatisticsBar();
				that.getThematicStatisticsLine();
				that.getSupervisePie();
				that.detailData=[
					{"No":"1","num":"NM-HS-001","grade":"Ⅱ级","unit":"内蒙古西部管道","datetime":"2019年3月","pipe_name":"乌海管道","pipe_diameter":"1012","start_median_num":"231","start_median_mileage":"23","end_median_num":"232","end_median_mileage":"24"},
					{"No":"2","num":"NM-HS-002","grade":"Ⅱ级","unit":"内蒙古西部管道","datetime":"2019年3月","pipe_name":"乌海管道","pipe_diameter":"1012","start_median_num":"123","start_median_mileage":"13","end_median_num":"125","end_median_mileage":"10"},
					{"No":"3","num":"NM-HS-003","grade":"Ⅲ级","unit":"内蒙古西部管道","datetime":"2019年3月","pipe_name":"乌海管道","pipe_diameter":"1012","start_median_num":"11","start_median_mileage":"2","end_median_num":"12","end_median_mileage":"14"}
				],
				that.areaOption=[   // 下拉选选项值
					{"label":"全市","value":"全市"},
					{"label":"呼和浩特","value":"呼和浩特"},
					{"label":"鄂尔多斯","value":"鄂尔多斯"},
					{"label":"包头","value":"包头"},
					{"label":"赤峰","value":"赤峰"},
					{"label":"乌海","value":"乌海"},
					{"label":"呼伦贝尔","value":"呼伦贝尔"},
					{"label":"兴安盟","value":"兴安盟"},
					{"label":"通辽","value":"通辽"},
					{"label":"锡林郭勒盟","value":"锡林郭勒盟"},
					{"label":"乌兰察布","value":"乌兰察布"},
					{"label":"巴彦淖尔","value":"巴彦淖尔"},
					{"label":"阿拉善盟","value":"阿拉善盟"},
				];
				that.companyOption=[   // 下拉选选项值
					{"label":"全部企业","value":"全部企业"},
					{"label":"内蒙古西部天然气管道运行有限公司","value":"内蒙古西部天然气管道运行有限公司"},
					{"label":"中国石油天然气股份有限公司管道长庆输气分公司","value":"中国石油天然气股份有限公司管道长庆输气分公司"},
					{"label":"乌海华油天然气有限责任公司","value":"乌海华油天然气有限责任公司"},
					{"label":"阿拉善盟深中能源发展有限公司","value":"阿拉善盟深中能源发展有限公司"},
					{"label":"内蒙古兴洁天然气有限公司西部天然气管道运行有限公司","value":"内蒙古兴洁天然气有限公司西部天然气管道运行有限公司"},
					{"label":"中国石油天然气股份有限公司管道长庆输油气分公司","value":"中国石油天然气股份有限公司管道长庆输油气分公司"},
					{"label":"中国石油东部有限公司西气东输银川管理处","value":"中国石油东部有限公司西气东输银川管理处"},
				];
				that.jasMap = new JasMap({
	                appConfig:that.mapConfig
	            });
			})
			
		},
		watch: {
			// 如果需要联动
			areaVal: function (newval, oldval) {
				
			},
			// 地图最大化的监控
			ismax:function (newval, oldval) {
				console.log("111111");
				var that = this;
				// if(newval){
					// alert("执行全屏地图的操作方法")
					this.$nextTick(function(){
						that.jasMap.resizeMap()
					})
				// }else{
				// 	// alert("执行缩放地图的操作方法")
				// }
			},
		},
		methods: {
			getChartData:function () {
				var that = this;
				
			},
			getSupervisePie : function(){
				var that = this;
				if(!this.supervisePie){
					that.supervisePie = echarts.init(document.getElementById('supervise_pie'));
					$(window).resize(function () {
						that.supervisePie.resize();
					});
				}
				var option = {
				    tooltip: {
				        trigger: 'item',
				        formatter: "{b}: {c} ({d}%)"
				    },
				    legend: {
				        orient: 'horizontal',
				        data:['已整改','待整改'],
				        left:"right",
				        textStyle:{
							color:"#f1f2ea"					            	
				        }
				    },
			        textStyle:{
						color:"#f1f2ea"					            	
			        },
				    series: [
				        {
				            name:'',
				            type:'pie',
				            radius: ['45%', '75%'],
				            center: ['50%', '60%'],
				            avoidLabelOverlap: true,
				            color:['#28ffd9','#ffea00'],
				            label: {
				                normal: {
				                    show: true,
				                    formatter: "{b}: {d}%",
				                    position: 'top'
				                },
				                emphasis: {
				                    show: true,
				                    textStyle: {
				                        fontSize: '15',
				                        fontWeight: 'bold'
				                    }
				                }
				            },
				            labelLine: {
				                normal: {
				                    show: true
				                }
				            },
				            data:[
				                {value:680, name:'已整改'},
				                {value:320, name:'待整改'}
				            ]
				        }
				    ]
				};
				that.supervisePie.setOption(option, true);
				that.supervisePie.on("click",function(parame){
					that.getComplianceList();
				})
			},
			getThematicStatisticsPie:function(){
				var that = this;
				if(!this.thematicStatisticsPie){
					that.thematicStatisticsPie = echarts.init(document.getElementById('thematic_statistics_pie'));
					$(window).resize(function () {
						that.thematicStatisticsPie.resize();
					});
				}
				var option = {
				    tooltip : {
				        trigger: 'item',
				        formatter: "{a} <br/>{b} : {c} ({d}%)"
				    },
				    legend: {
				        orient: 'horizontal',
				        left: 'right',
				        data: ['Ⅰ级','Ⅱ级','Ⅲ级'],
				        textStyle:{
							color:"#f1f2ea"					            	
				        }
				    },
				    textStyle:{
						color:"#f1f2ea"					            	
				    },
				    series : [{
			            name: '等级',
			            type: 'pie',
			            color:['#ff2d2d','#ff7400','#ffb719'],
			            radius : '55%',
			            data:[
			                {value:75, name:'Ⅰ级'},
			                {value:105, name:'Ⅱ级'},
			                {value:154, name:'Ⅲ级'}
			            ],
			            label: {
			                normal: {
			                    show: true,
			                    formatter: "{b}: {d}%",
			                    position: 'top'
			                },
			                emphasis: {
			                    shadowBlur: 10,
			                    shadowOffsetX: 0,
			                    shadowColor: 'rgba(0, 0, 0, 0.5)'
		                    }
		            	}
			        }]
				};
				that.thematicStatisticsPie.setOption(option, true);
				that.thematicStatisticsPie.on("click",function(parame){
					that.getThematicStatisticsList();
				})
			},
			getThematicStatisticsBar:function(){
				var that = this;
				if(!this.thematicStatisticsBar){
					that.thematicStatisticsBar = echarts.init(document.getElementById('thematic_statistics_bar'));
					$(window).resize(function () {
						that.thematicStatisticsBar.resize();
					});
				}
				var option = {
					    tooltip : {
					        trigger: 'axis',
					        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					        }
					    },
					    legend: {
					        data:['Ⅰ级','Ⅱ级','Ⅲ级'],
					        textStyle:{
								color:"#f1f2ea"					            	
					        },
					        left:"right",
					    },
					    grid: {
					        bottom:20
					    },
					    xAxis : [
					        {
					            type : 'category',
					            data : ['呼和浩特','鄂尔多斯','包头','赤峰'],
					            axisLabel: {
					                textStyle: {
					                    color: '#f1f2ea'
					                }
					            },
					            axisLine:{
					                lineStyle:{
					                    color: '#f1f2ea'
					                }   
					            }
					        }
					    ],
					    yAxis : [
					        {
					        	name:"（KM）",					        	
					            type : 'value',
					            axisLabel: {
					                textStyle: {
					                    color: '#f1f2ea'
					                }
					            },
					            axisLine:{
					                lineStyle:{
					                    color: '#f1f2ea'
					                }   
					            }
					        }
					    ],
					    series : [
					    	{
					            name:'Ⅰ级',
					            type:'bar',
					            stack: 'grade',
					            data:[154, 190, 330, 410],
					            color:'#ff2d2d',
					            itemStyle:{
									normal:{
										color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
											offset: 0,
											color: '#ff7400'
											}, {
											offset: 1,
											color: '#ff2d2d'
										}])
									}
								}
					        },{
					            name:'Ⅱ级',
					            type:'bar',
					            stack: 'grade',
					            data:[220, 182, 191, 234],
					            color:'#ff7400',
					            itemStyle:{
									normal:{
										color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
											offset: 0,
											color: '#6950d2'
											}, {
											offset: 1,
											color: '#9b4457'
										}])
									}
								}
					        },{
					            name:'Ⅲ级',
					            type:'bar',
					            stack: 'grade',
					            data:[134, 90, 230, 210],
					            color:'#ffb719',
					            barWidth:40,
					            itemStyle:{
									normal:{
										color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
											offset: 0,
											color: '#0a8fca'
											}, {
											offset: 1,
											color: '#2c46b5'
										}])
									}
								}
					        }
					    ]
					};
				that.thematicStatisticsBar.setOption(option, true);
			},
			getThematicStatisticsLine:function(){
				var that = this;
				if(!this.thematicStatisticsLine){
					that.thematicStatisticsLine = echarts.init(document.getElementById('thematic_statistics_line'));
					$(window).resize(function () {
						that.thematicStatisticsLine.resize();
					});
				}
				var option = {
					    tooltip: {
					        trigger: 'axis'
					    },
					    legend: {
					        data:['Ⅰ级','Ⅱ级','Ⅲ级'],
					        textStyle:{
								color:"#f1f2ea"					            	
					        },
					        left:"right",
					    },
					    toolbox: {
					    	show:false
					    },
					    xAxis: {
					        type: 'category',
					        boundaryGap: false,
					        data:['2013','2014','2015','2016','2017','2018','2019'],
					        axisLabel: {
					            textStyle: {
					                color: '#f1f2ea'
					            }
					        },
					        axisLine:{
					            lineStyle:{
					                color: '#f1f2ea'
					            }   
					        }
					    },
					    yAxis: {
					    	name:"（KM）",
					        type: 'value',
					        axisLabel: {
					            textStyle: {
					                color: '#f1f2ea'
					            }
					        },
					        axisLine:{
					            lineStyle:{
					                color: '#f1f2ea'
					            }   
					        }
					        
					    },
					    series: [
					        {
					            name:'Ⅰ级',
					            type:'line',
					            data:[120, 132, 101, 134, 90, 230, 210],
					            color:"#ff2323"
					        },
					        {
					            name:'Ⅱ级',
					            type:'line',
					            data:[220, 182, 78, 234, 290, 330, 310],
					            color:"#28ffd9"
					        },
					        {
					            name:'Ⅲ级',
					            type:'line',
					            data:[150, 232, 201, 154, 190, 330, 410],
					            color:" #00c6ff"
					        }
					    ]
					};
				that.thematicStatisticsLine.setOption(option, true);
			},
			open3D:function(e){
				window.open("../../../../jasmvvm/pages/map3d/app_nmg/index.html");
			},
			openMax:function(e){
				this.ismax = !this.ismax;

			},
			clearMap:function(e){
			},
            switchImageMap:function(e){
                if(this.baseMap !== "google_img"){
                    this.baseMap = "google_img";
                }else{
                    this.baseMap = "dark_shp";
                }
                this.jasMap.switchBaseMap(this.baseMap);
			},
            switchVecMap:function(e){
                if(this.baseMap !== "google_vec"){
                    this.baseMap = "google_vec";
                }else{
                    this.baseMap = "dark_shp";
                }
                this.jasMap.switchBaseMap(this.baseMap);
            },
			openTuCeng:function(){
				jasTools.selfDialog.show({
					title: '图层列表',
					src: '../common/mapList.html',
					height: '265px',
					width: '200px',
					right:"27%",
					top:"360px",
				})
			},
			areaChange:function(){
				alert(this.areaVal)
			},
			companyChange:function(){
				alert(this.companyVal)
			},
			operateMap:function(){
				// switch 按钮控制图层
				// alert("switch 按钮控制图层");
				var arr = [];
                if(this.button_1_value){
                    arr.push(1);//layerId表level值
                }
                if(this.button_2_value){
                    arr.push(2);
                }
                if(this.button_3_value){
                    arr.push(3);
                }
                // 这里调用操作地图图层的方法
                // switch 传参 a:所要展示的类型值[1,2,3]
                //             b:类型的名称 "level"
                this.jasMap.updateLayer(this.layerId,{
                    "show":true,
                    "fieldName":"level",
                    "fieldValues":arr
                })
			},
			operateMapVido : function(){
				this.jasMap.layerVisibleSwitch(this.layerId_vido,this.button_4_value);
			},
			getThematicStatisticsList:function(){
				jasTools.selfDialogNew.show({
					title: '按等级统计',
					src: './dialogs/grade_statistic.html',
					height: '440px',
					// width: '800px',
					width: '48%',
				})
			},
			openVidoDetail : function(item){
				jasTools.selfDialogNew.show({
					title: '视频监控',
					src: './dialogs/vido_detail.html',
					height: '440px',
					// width: '800px',
					width: '35%',
				})
			},
			previewFile : function(){
				jasTools.selfDialogNew.show({
					title: '合规性文件',
					src: './dialogs/preview_file.html',
					height: '740px',
					// width: '800px',
					width: '35%',
				})
			},
			getComplianceList : function(){
				jasTools.selfDialogNew.show({
					title: '督办整改列表',
					// src: './dialogs/detail2.html',
					src: './dialogs/detailList.html?dataType=neiJianCeWeiGui',
					height: '260px',
					// width: '800px',
					width: '48%',
				})
			},
			openDetail:function(idx){
				jasTools.selfDialog.show({
					title: '详情列表',
					src: './dialogs/detailPage.html',
					height: '450px',
					width: '48%',
					isDetail:true, 
				})
			},
			getComplianceList_1 : function(){
				jasTools.selfDialogNew.show({
					title: '高后果区合规性列表',
					// src: './dialogs/detail2.html',
					src: './dialogs/detailList_1.html?dataType=neiJianCeWeiGui',
					height: '260px',
					// width: '800px',
					width: '48%',
				})
			}
		}
	})
</script>


</html>